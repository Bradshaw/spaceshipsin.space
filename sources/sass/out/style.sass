
@import "node_modules/highlight.js/styles/monokai-sublime"

@use "sass:string"

@font-face
  font-family: 'Atkinson'
  src: url(/Atkinson-Hyperlegible-Regular-102a.woff2) format('woff2')

@font-face
  font-family: 'Fira Code'
  src: url(/FiraCode-Light.woff) format('woff2')

@function invert()
  @return #{ "invert()" }

$size-base: 15
$size-scale: 3
$bhue: 180
$body-color: hsl($bhue, 10, 95%)
$background-color: hsl($bhue, 0, 99%)
$text-color: hsl($bhue+180, 0, 5%)
$strong-color: hsl($bhue, 100%, 30%)
$link-color: hsl($bhue+180, 100, 25%)
$header-link-color: hsl($bhue+180, 100, 70%)
$title-color: hsl($bhue+180, 5, 30%)
$hover-color: hsl($bhue+180, 100, 50%)
$page-width: 18cm
$corner-size: 55px
$corner-clip: polygon(0% 0%, 100% 0%, 100% calc( 100% - #{$corner-size} ), calc( 100% - #{$corner-size} ) 100%, 0% 100%)
$corner-size-mini: 30px
$corner-clip-mini: polygon(0% 0%, 100% 0%, 100% calc( 100% - #{$corner-size-mini} ), calc( 100% - #{$corner-size-mini} ) 100%, 0% 100%)

$small-corner-size: 30px
$small-corner-clip: polygon(0% 0%, 100% 0%, 100% calc( 100% - #{$small-corner-size} ), calc( 100% - #{$small-corner-size} ) 100%, 0% 100%)

$dark-body-color: hsl($bhue, 10, 15%)
$dark-background-color: hsl($bhue+180, 5, 15%)
$dark-text-color: hsl($bhue, 15, 80%)
$dark-strong-color: hsl($bhue, 100%, 80%)
$dark-link-color: hsl($bhue+180, 90, 65%)
$dark-title-color: hsl($bhue, 15, 75%)
$dark-hover-color: hsl($bhue, 80, 50%)

$body-stripes: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 16 16'%3E%3Cg %3E%3Cpolygon fill='%23888' fill-opacity='0.2' points='0 8 8 0 16 0 0 16'/%3E%3Cpolygon fill='%23888' fill-opacity='0.2' points='16 8 16 16 8 16'/%3E%3C/g%3E%3C/svg%3E")

body
  padding: 1cm 1cm 0 1cm
  margin: 0
  font-family: "Atkinson", serif
  background: $body-stripes fixed
  color: $text-color
  @media (prefers-color-scheme: dark)
    background-color: $dark-body-color
    color: $dark-text-color

.container
  clip-path: $corner-clip
  max-width: $page-width
  margin: auto
  background: $background-color
  @media (prefers-color-scheme: dark)
    background: $dark-background-color

.flip
  @media (prefers-color-scheme: dark)
    filter: invert() hue-rotate(180deg)

p, ul, ol, summary, pre, table
  font-size: #{$size-base}pt
  line-height: 1.5

code
  font-size: #{0.9 * $size-base}pt
  font-weight: bold

code.hljs
  font-size: #{0.65 * $size-base}pt
  font-weight: unset
  background-color: $dark-background-color
  font-family: "Fira Code"

hr
  height: 0
  border-bottom: 0

main
  padding: 20px

main, footer
  max-width: $page-width
  margin: auto

.tags
  p, ul, summary
    font-size: #{$size-base - $size-scale}pt
  ul
    margin: 0

footer
  background: $body-color
  @media (prefers-color-scheme: dark)
    background: $dark-body-color
    margin-top: 5em
  p, ul, summary
    font-size: #{$size-base - $size-scale}pt
  ul
    margin: 0

.footercontent
  padding: 20px
img
  max-width: 100%

a
  color: $link-color
  @media (prefers-color-scheme: dark)
    color: $dark-link-color

a:hover
  color: $hover-color
  @media (prefers-color-scheme: dark)
    color: $dark-hover-color

h1, h2, h3, h4, h5, h6
  color: $title-color
  margin: 30px 0 0 0
  @media (prefers-color-scheme: dark)
    color: $dark-title-color
  a
    text-decoration: none

.date
  font-size: #{$size-base - $size-scale}pt

h1
  font-size: #{$size-base + $size-scale * 7}pt
  font-weight: 800

h2
  font-size: #{$size-base + $size-scale * 5}pt

h3
  font-size: #{$size-base + $size-scale * 4}pt

h4
  font-size: #{$size-base + $size-scale * 3}pt

h5, h6
  font-weight: normal

h5
  font-size: #{$size-base + $size-scale * 2}pt

h6
  font-size: #{$size-base + $size-scale}pt

strong
  color: $strong-color
  @media (prefers-color-scheme: dark)
    color: $dark-strong-color

aside
  clip-path: $corner-clip-mini
  padding: 1px 20px
  background-color: $title-color
  p, h1, h2, h3, h4, h5, h6, ul, ol, li, summary
    color: $background-color
  a
    color: $header-link-color
  strong
    color: $dark-strong-color

header
  clip-path: $corner-clip
  max-width: calc(#{$page-width} - 40px)
  margin: auto
  padding: 20px 20px 15px 20px
  background-color: $title-color
  span.title
    font-size: 50pt
    color: $background-color
  nav
    margin-top: 5px
    font-size: 21pt
    color: $background-color
    a
      color: $header-link-color
  ul
    margin-top: 0
    margin-bottom: 0
    list-style: none
    padding-left: 1.5em

blockquote
  font-style: italic

table
  max-width: calc(#{$page-width} - 20px)
  clip-path: $corner-clip-mini
  margin: 0 auto 0 auto
  background-color: $title-color
  color: $background-color
  border-spacing: 0
  th
    padding-top: 10px
    padding-bottom: 10px
  th, td
    padding-left: 0.5em
    padding-right: 0.5em
    color: $background-color
  th:last-child, td:last-child
    padding-right: 40px
  a
    color: $header-link-color
  strong
    color: $dark-strong-color
  th, tr:nth-child(even)
    background-color: rgba(128, 128, 128, 0.2)
  tr:last-child > td
    padding-bottom: 5px

a.hlink
  padding: 0 3px
  text-decoration: none

a.hlink:hover
  color: $background-color
  background-color: $dark-link-color
  // @media (prefers-color-scheme: dark)
  //   background-color: $link-color

.math
  font-size: larger
  font-family: serif
  font-style: italic
  padding: 0 1px

.rss
  font-size: x-small
  margin-left: 20px

.publishing-info
  p
    font-size: smaller !important

.hidden
  display: none
@keyframes distort-horus
  25%
    text-shadow: none
  26%
    text-shadow: 2px -1px #ff0000, -2px 3px #00ffff
  27%
    text-shadow: -2px -3px #ff0000, 2px 1px #00ffff
  28%
    text-shadow: 2px 1px #ff0000, -4px 1px #00ffff
  29%
    text-shadow: -4px 1px #ff0000, -2px -1px #00ffff
  30%
    text-shadow: none
  75%
    text-shadow: none
  76%
    text-shadow: -4px 1px #ff0000, -2px -1px #00ffff
  77%
    text-shadow: -2px -3px #ff0000, 2px 1px #00ffff
  78%
    text-shadow: 2px -1px #ff0000, -2px 3px #00ffff
  79%
    text-shadow: 2px 1px #ff0000, -4px 1px #00ffff
  80%
    text-shadow: none

/* YOUR SEED HERE: */
$seed: 369

@function getRandom($max)
  //http://indiegamr.com/generate-repeatable-random-numbers-in-js/

  //Note the "!global" flag:
  //http://webdesign.tutsplus.com/articles/understanding-variable-scope-in-sass--cms-23498
  $seed: ($seed * 9301 + 49297) % 233280 !global
  @return ($seed / 233280) * $max

@function randy($limit: null)
  @if $limit
    @return getRandom($limit)
  @else
    @return getRandom(9007199254740991)/9007199254740991

@function randcol($steps: 2, $offset: 0)
  @return hsl(randy($steps)*(360/$steps)+$offset,100,50)

@function randoff($spread: 4)
  @return #{-$spread+randy()*2*$spread}px

blockquote
  padding-left: 20px
  margin-bottom: 30px
  color: #555
  @media (prefers-color-scheme: dark)
    color: darken($dark-text-color, 20%)

blockquote::before
  content: "\201C"
  font-size: 43pt
  font-family: serif
  color: #555
  position: relative
  top: 0
  left: -35px
  height: 0
  width: 0
  display: block
  @media (prefers-color-scheme: dark)
    color: darken($dark-text-color, 20%)

.horus
  animation: distort-horus 5s infinite
  @media (prefers-reduced-motion: reduce)
    animation: none
    text-shadow: -1px -1px #ff0000, 1px 1px #00ffff

.julius .distort
  animation: distort-julius 5s infinite
  @media (prefers-reduced-motion: reduce)
    animation: none
    text-shadow: -1px 0px hsl(180,100,50)

p.julius
  white-space: pre-wrap
  font-family: monospace
  font-stretch: condensed
  background-color: #e8dbdf
  padding: 30px
  clip-path: $corner-clip
  background-image: $body-stripes
  @media (prefers-color-scheme: dark)
    background-color: darken(#e8dbdf, 60%)
    color: $dark-text-color

summary
  outline: none
  user-select: none
  cursor: pointer

[open] summary
  user-select: text

@media (max-width: 20cm)
  .container
    clip-path: $small-corner-clip

  p.julius
    clip-path: $small-corner-clip

  header
    clip-path: $small-corner-clip
    //span.title
    //  font-size: #{$size-base + $size-scale*2}pt
    nav
      font-size: #{$size-base + $size-scale}pt
  img
    max-width: 100%
    width: 100%

  main
    padding: 20px 0
    margin: auto
    width: 90%
    max-width: unset

  body
    margin: 0
    padding: 0

@media (max-width: 405px)
  header
    clip-path: none
    span.title
      font-size: #{$size-base + $size-scale*2}pt
    nav
      font-size: #{$size-base}pt
